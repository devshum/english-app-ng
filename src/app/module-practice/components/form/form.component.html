<form [formGroup]="form"
      autocomplete="off"
      class="form block block--default br"
      *ngIf="!loadingError">
  <!-- todo component -->
  <h1 class="form__text-box h1" [ngSwitch]="isLoading">
    <span class="form__title h1" 
        *ngSwitchCase="false"
        [ngClass]="{
          'form__title--green': form.valid
        }">
        
        {{ randomVerb?.infinitive }}
    </span>

    <span *ngSwitchDefault class="form__title--stub h1">...</span>
  </h1>

  <div class="form__wrapper" [ngSwitch]="isLoading">
    <ng-container *ngSwitchCase="false">
      <div class="form__group">
        <label class="form__label"
              for="past">
              Past
        </label>
        
        <input formControlName="past"
              class="form__input input br"
              id="past" 
              type="text"
              placeholder="2nd form"
              [class.form__input--disabled]="past.valid"
              #pastInput
              (input)="onStoreAnswer({ past, pastParticiple })">
    
        <span [class.form__error--shown]="hasError(past, 'pastIsCorrect')"
              class="form__error">
              2nd form isn't correct
        </span>
      </div>
      
      <div class="form__group">
        <label class="form__label"
              for="pastParticiple">
              Past participle
        </label>
    
        <input formControlName="pastParticiple"
              class="form__input input br"
              id="pastParticiple" 
              type="text"
              placeholder="3rd form"
              [class.form__input--disabled]="pastParticiple.valid"
              #participleInput
              (input)="onStoreAnswer({ past, pastParticiple })">
    
        <span [class.form__error--shown]="hasError(pastParticiple, 'participleIsCorrect')"
              class="form__error">
              3rd form isn't correct
        </span>
      </div>

      <app-btn [text]="!correct ? 'Pick another verb' 
                                : 'Pick another verb'" 
               [modificator]="'btn--default'"
               [focus]="correct"
               (click)="pickVerb()"
               #pickBtn>

              <i *ngIf="correct" 
                 class="form__icon" 
                 [inlineSVG]="'check-mark.svg'">
              </i>
      </app-btn>
    </ng-container>

    <app-loader [modificator]="'loader__circle--form'" 
                *ngSwitchDefault>
    </app-loader>
  </div>

  <app-add-bookmark *ngIf="correct"
                    class="form__bookmark"
                    [verb]="randomVerb">
  </app-add-bookmark>
</form>

<app-error class="verbs__error" 
           [mode]="'randomVerb'" 
           (hookRandomVerbAfterError)="randomVerb = $event">
</app-error>